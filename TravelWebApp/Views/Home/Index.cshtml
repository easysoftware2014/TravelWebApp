@{
    ViewBag.Title = "Home";
    Layout = "~/Views/shared/_TravelLayout.cshtml";
}


<div class="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3 text-center">
                <h3>We provide online booking</h3>
                <a href="#" class="btn booking-btn text-center" data-toggle="modal" data-target="#sign_in">Click for Booking !</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="sign_in" tabindex="-1" role="dialog" aria-labelledby="sign-in" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Log In</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="username">Username</label>
                    <br />
                    <input type="email" class="form-control" id="username" required="required" />
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <br />
                    <input type="password" class="form-control" id="password" required="required" />
                </div>
                <div class="form-group">
                    <input type="button" class="btn btn-success" id="btnSubmit" value="Submit">
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn text-center" data-toggle="modal" data-target="#registration">Register</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="registration" tabindex="-1" role="dialog" aria-labelledby="register" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" style="font-size: large">Registration Form</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="name">Name</label>
                    <br />
                    <input type="text" class="form-control" id="name" required="required" />
                </div>
                <div class="form-group">
                    <label for="surname">Surname</label>
                    <br />
                    <input type="text" class="form-control" id="surname" required="required" />
                </div>
                <div class="form-group">
                    <label for="contactNumber">Contact Number</label>
                    <br />
                    <input type="text" class="form-control" id="contactNumber" required="required" />
                </div>
                <h4 style="font-weight:lighter">Login Details:</h4>
                <hr />
                <div class="form-group">
                    <label for="email">Email</label>
                    <br />
                    <input type="email" class="form-control" id="email" required="required" />
                </div>
                <div class="form-group">
                    <label for="reg_password">Password</label>
                    <br />
                    <input type="password" class="form-control" id="reg_password" required="required" />
                </div>

            </div>
            <div class="modal-footer">
                <input type="submit" class="btn btn-default" id="btnRegister" value="Register">
            </div>
        </div>
    </div>
</div>

<!-- begin:booking -->
<div class="modal fade" id="booking" tabindex="-1" role="dialog" aria-labelledby="booking" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Online Booking Form</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4 col-md-offset-2 text-center">
                        <a href="#" class="btn btn-block booking-btn" data-toggle="modal" data-target="#sign_in">Login</a>
                        @*@Html.ActionLink("Login", "Login", new { }, new { @class = "btn btn-primary" })*@
                    </div>
                    <div class="col-md-6 text-center">
                        <a href="#" class="btn booking-btn text-center" data-toggle="modal" data-target="#register">Register</a>
                        @*@Html.ActionLink("Register", "Register", new { }, new { @class = "btn btn-success" })*@
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div id="signalR_message"></div>
                @*<input type="submit" class="btn confirm-btn" value="Confirm">*@
            </div>
        </div>
    </div>
</div>
<!-- end:booking -->

@section scripts
{
    <script src="~/Scripts/SignalR.js">
    </script>
    <script type="text/javascript">
        
        $("#btnSubmit").click(function () {
            var username = $("#username").val();
            var password = $("#password").val();

            var data = {
                'username': username,
                'password': password
            };

            $.ajax({
                type: "POST",
                url: "user/login",
                data: data,
                success: function (result) {

                    if (result.success === true) {

                        window.location.href = "/bookingmanagement/";
                    } else {
                        alert("Incorrect combination of email and password, please reenter");
                    }
                },
                dataType: "json"
            });
        });
        $("#btnRegister").click(function () {
            var name = $("#name").val();
            var surname = $("#surname").val();
            var contact = $("#contactNumber").val();
            var username = $("#email").val();
            var password = $("#reg_password").val();


            var data = {
                'email': username,
                'password': password,
                'name': name,
                'surname': surname,
                'contact': contact
            };

            $.ajax({
                type: "POST",
                url: "user/register",
                data: data,
                success: function (result) {
                    if (result.success === true) {

                        window.location.href = "/bookingmanagement/";
                    } else {
                        alert("Incorrect combination of email and password, please reenter");
                    }
                },
                dataType: "json"
            });
        });

    </script>
}


